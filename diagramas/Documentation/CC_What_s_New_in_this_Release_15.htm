<html>
<head>
<meta id='metaFileNameId' name='id' content='30948' />
<title>What's New in this Release</title>
<link type='text/css' href='xstyle.css' rel='stylesheet' media='all' />
<script src='script.js' language='javascript' type='text/javascript'> </script>
<script src='common.js' language='javascript' type='text/javascript'> </script>
<xml>
<MSHelp:Attr Name="Product" Value="JsDiagram">
</xml>
</head>
<body style='margin: 0;'>
<img src='collapse.png' title='Collapse Section' id='collapseImage' style='display: none; height: 0; width: 0;' /><img src='expand.png' title='Expand Section' id='expandImage' style='display: none; height: 0; width: 0;' /><img src='collapsesmall.png' title='Collapse All' id='collapseAllImage' style='display: none; height: 0; width: 0;' /><img src='expandsmall.png' title='Expand All' id='expandAllImage' style='display: none; height: 0; width: 0;' /><input type="hidden" id="userDataCache" class="userDataStyle"><img src='arrow.png' title='DropDown image' id='dropDownImage' style='display: none; height: 0; width: 0;' /><img src='arrowh.png' title='DropDown image' id='dropDownHoverImage' style='display: none; height: 0; width: 0;' /><img src='copycode.png' title='Copy Code' id='copyCodeImage' style='display: none; height: 0; width: 0;' /><img src='copycodeh.png' title='Copy Code' id='copyCodeHoverImage' style='display: none; height: 0; width: 0;' /><div id='nsbanner'>
<table class='bannerparthead' cellspacing='0'>
<tr>
<td><span class='gtitle'>MindFusion.Diagramming for JavaScript Programmer's Guide</span></td>
</tr>
<tr>
<td style='border-bottom: solid 1px #C8CDDE;'><span class='title'>What's New in this Release</span></td>
</tr>
</table>
</div>
<div id='nstext'>
<p>The list below describes recent changes and additions to JsDiagram:</p><h2>New in version 3.5.2</h2><h3>Topological Layout</h3><p><a id='97340' href='T_MindFusion_Graphs_TopologicalLayout.htm' title=''>TopologicalLayout</a> applies&#160;graph topological ordering&#160;to&#160;the diagram (topological ordering of a graph is one where link's origin node&#160;is placed&#160;before link's destination node).&#160;The layout algorithm&#160;arranges nodes in a row or a column, depending on the value of the <a id='97350' href='F_MindFusion_Graphs_TopologicalLayout_direction.htm' title=''>direction</a> property, in such a way that there are no backward links when the graph is acyclic. If the graph contains cycles, the algorithms selects ordering with as few backward links as possible. Links&#160;that connect&#160;non-adjacent nodes are rendered as arcs, whose&#160;amplitude is proportional to the distance between&#160;respective connected nodes. Forward links are rendered at one side of the nodes and back links are rendered at the opposite side. All that makes it easy to discern graph features such as overall flow direction, cycles and nested cycles. </p><p><img src='topological_layout.png' title='' hspace='0' vspace='0' align='' width='557' height='245'/></p><h3>Miscellaneous</h3><ul><li>The diagram canvas now automatically expands to fill the area freed up when a scrollbar auto-hides.</li><li>Fixed <a id='32266' href='T_MindFusion_Diagramming_Overview.htm' title=''>Overview</a> flickering when the tracker rectangle is being dragged near the control's borders.</li></ul><p></p><h2>New in version 3.5.1</h2><h3>Virtual scroll improvements</h3><ul><li>The control now handles mouse wheel&#160;events to scroll the diagram&#160;when virtual scrolling is enabled.</li><li>DOM elements&#160;that implement virtual scroll mode now use CSS grid layout. You might need to adjust page layout to apply size constraints on the diagram div or its parent. For compatibility with older browsers, you can set <a id='96763' href='F_MindFusion_Diagramming_CompatConfig_gridLayout.htm' title=''>CompatConfig.gridLayout</a> = <b>false</b> to fall back to the absolute positioning from previous versions.</li><li><a id='37249' href='M_MindFusion_Diagramming_Diagram_setVirtualScroll_1_Boolean.htm' title=''>VirtualScroll</a> mode is now enabled by default.</li></ul><h3>Electron compatibility</h3><p>Serialization and clipboard operations should now work under Electron.js. In previous versions they would throw exceptions&#160;due to restricted use of <b>eval</b>.</p><h3>Miscellaneous</h3><ul><li>Mouse pointer position is now provided as argument&#160;to <a id='34117' href='F_MindFusion_Diagramming_Events_nodeCreated.htm' title=''>nodeCreated</a> and <a id='34112' href='F_MindFusion_Diagramming_Events_linkCreated.htm' title=''>linkCreated</a> events.</li><li><a id='96758' href='M_MindFusion_Drawing_ComponentBase_setVisibility_1_Visibility.htm' title=''>Visibility</a> property added to <a id='57993' href='T_MindFusion_Diagramming_CompositeNode_0.htm' title=''>CompositeNode</a> components lets you keep invisible components in the template.</li><li>General performance improvements.</li><li>Collapse / expand icon is now drawn correctly for <span class='repeatingLink'>CompositeNode</span> when <a id='37846' href='CC_M_MindFusion_Diagramming_DiagramNode_setExpandable_1_Boolean_0.htm' title=''>Expandable</a> is enabled.</li><li>Json deserialization no longer creates undo records.</li></ul><h3>API changes</h3><p>For compatibility with MindFusion&#160;diagramming API&#160;for other platforms, <a id='21957' href='M_MindFusion_Diagramming_DiagramItem_setStrokeThickness_1_Number.htm' title=''>StrokeThickness</a> is now specified in diagram's <a id='1765' href='M_MindFusion_Drawing_Canvas_setMeasureUnit_1_MeasureUnit.htm' title=''>MeasureUnit</a> instead of pixels. You can set <a id='96764' href='F_MindFusion_Diagramming_CompatConfig_pixelThickness.htm' title=''>CompatConfig.pixelThickness</a>&#160;= <b>true</b> in order to revert to using pixel values.</p><h2>New in version 3.5</h2><h3>Control nodes</h3><p><a id='91681' href='T_MindFusion_Diagramming_ControlNode_0.htm' title=''>ControlNode</a> objects display custom HTML content, specified&#160;via&#160;their <a id='91693' href='M_MindFusion_Diagramming_ControlNode_setTemplate_1_String.htm' title=''>Template</a> property.&#160;A node's&#160;DOM structure is created inside&#160;the <a id='91686' href='M_MindFusion_Diagramming_ControlNode_getContent_0.htm' title=''>Content</a> div element, which is then rendered on top of the diagram canvas. Note that this prevents <span class='repeatingLink'>ControlNode</span>s&#160;drawing in diagram' usual Z order, and they will always appear on top of other diagram items.</p><p>By default the diagram intercepts mouse events of all hosted html elements to enable moving nodes or drawing links. You can specify that&#160;interactive elements, such as buttons or text boxes, should receive input instead by&#160;setting their <b>data-interactive</b> attribute to <b>true</b>.</p><p>You can register event handlers for elements in the template by&#160;assigning&#160;function names to <b>data-event</b> attributes in the form data-event-'eventName'='handlerName'. Alternatively, you&#160;can attach event&#160;listeners using DOM API once&#160;<a id='91706' href='F_MindFusion_Diagramming_Events_nodeDomCreated.htm' title=''>nodeDomCreated</a> is raised to signify that&#160;<span class='repeatingLink'>content</span>&#160;is available. E.g. access child elements by calling args.getNode().getContent().querySelector(...) and&#160;attach handlers via&#160;elements' <b>addEventListener</b> method.</p><p><span class='repeatingLink'>ControlNode</span>s create DOM elements from their template only in the main diagram, and render images instead when&#160;shown in <a id='32266' href='T_MindFusion_Diagramming_Overview.htm' title=''>Overview</a> or <a id='32519' href='T_MindFusion_Diagramming_NodeListView.htm' title=''>NodeListView</a>.&#160;Note that in this case image elements&#160;in the template will render only if specified in base64 format.&#160;The Utils.toDataUrl method helps you convert an image URL to base64 data URL.</p><p>New ControlNodes.html example included in distribution demonstrates the ControlNode API.</p><p></p><h3>Button components</h3><p><a id='32258' href='Composite_Nodes.htm' title=''>Composite nodes</a> can now contain buttons. <a id='91667' href='T_MindFusion_Diagramming_Button.htm' title=''>Button</a> components respond to user clicks by calling the JavaScript function whose name is assigned to their <b>clickHandler</b> attribute. A button can show a text label assigned to the <b>text</b> attribute, or an image whose URL is assigned to <b>imageLocation</b>. The following example adds&#160;a button to <a id='57993' href='T_MindFusion_Diagramming_CompositeNode_0.htm' title=''>CompositeNode</a> template:</p><p><table class='syntax' codeLanguage='JavaScript' cellspacing='0'><tr><th><span style='float: left;'>JavaScript</span>
<span class='copyCode' onclick='CopyCode(this);' onkeypress='CopyCode_CheckKey(this);' onmouseover='ChangeCopyCodeIcon(this, true);' onmouseout='ChangeCopyCodeIcon(this, false);'>
<img src='copycode.png' title='Copy Code' style='border-width: 0;' />&#160;Copy Code</span>
</th></tr><tr><td>{<br/>&#160;&#160;&#160; component: "Button",<br/>&#160;&#160;&#160; brush: "#ccc",<br/>&#160;&#160;&#160; text: "Delete",<br/>&#160;&#160;&#160; width: 30,<br/>&#160;&#160;&#160; cornerRadius: 3.5,<br/>&#160;&#160;&#160; clickHandler: "onDeleteClick"<br/>}</td></tr></table></p><h3>Miscellaneous</h3><ul><li>Content of&#160;<a id='57993' href='T_MindFusion_Diagramming_CompositeNode_0.htm' title=''>CompositeNode</a>s is now clipped by default if <a id='32440' href='CC_T_MindFusion_Diagramming_Shape_0.htm' title=''>Shape</a> in the template is marked with <b>isOutline</b> attribute. To disable that, set <a id='91708' href='M_MindFusion_Diagramming_CompositeNode_setClipToOutline_1_Boolean.htm' title=''>ClipToOutline</a> to <b>false</b>.</li><li>Set <a id='91703' href='M_MindFusion_Diagramming_Diagram_setExpandButtonAction_1_ExpandButtonAction.htm' title=''>ExpandButtonAction</a> to <a id='91704' href='T_MindFusion_Diagramming_ExpandButtonAction_1.htm' title=''>RaiseEvents</a> and +/- buttons of <a id='37846' href='CC_M_MindFusion_Diagramming_DiagramNode_setExpandable_1_Boolean_0.htm' title=''>Expandable</a> nodes will only raise an <a id='91705' href='F_MindFusion_Diagramming_Events_expandButtonClicked.htm' title=''>expandButtonClicked</a>&#160;event instead of expand or collapse the tree under that node. You can use this to implement custom logic for the +/- button.</li></ul><p></p>
</div>
<div id='nsfooter'>
<table class='footer' cellspacing='0'>
<tr>
<td valign='middle'>
<span class='copyright'>© 2021 MindFusion</span>
</td>
</tr>
</table>
</div>
</body>
</html>
